# Game Launcher 基本機能設計書

## 1. 概要

Windows用アプリケーションランチャーの基本機能を実装する設計書です。アプリケーションの登録・管理・起動を行うQt C++アプリケーションとして開発します。

## 2. 機能要件

### 2.1 主要機能
1. **アプリケーション登録機能**
   - .exeファイルのパス選択
   - アプリケーション名の設定
   - アイコンの自動取得・設定

2. **アプリケーション管理機能**
   - 登録済みアプリの一覧表示
   - アプリケーション情報の編集
   - アプリケーションの削除

3. **起動機能**
   - ワンクリックでのアプリケーション起動
   - 起動履歴の記録
   - 起動回数のカウント

4. **表示機能**
   - グリッド表示とリスト表示の切り替え
   - アプリケーションの検索・フィルタリング

## 3. データ構造設計

### 3.1 AppInfo クラス
```cpp
class AppInfo {
public:
    QString name;           // アプリケーション名
    QString path;           // 実行ファイルパス
    QString iconPath;       // アイコンファイルパス
    QDateTime lastLaunch;   // 最終起動時刻
    int launchCount;        // 起動回数
    QString description;    // 説明（任意）
};
```

### 3.2 データ永続化
- **形式**: JSON
- **ファイル名**: `apps.json`
- **保存場所**: アプリケーション実行ディレクトリ

```json
{
  "apps": [
    {
      "name": "アプリケーション名",
      "path": "C:/path/to/app.exe",
      "iconPath": "C:/path/to/icon.ico",
      "lastLaunch": "2026-01-24T15:30:00",
      "launchCount": 5,
      "description": "アプリケーションの説明"
    }
  ]
}
```

## 4. クラス設計

### 4.1 MainWindow クラス
- **役割**: メインUIの制御
- **主要メソッド**:
  - `addApplication()`: アプリ追加ダイアログ表示
  - `removeApplication()`: 選択アプリの削除
  - `launchApplication()`: アプリケーション起動
  - `switchViewMode()`: 表示モード切り替え
  - `searchApplications()`: アプリ検索

### 4.2 AppManager クラス（新規作成）
- **役割**: アプリケーションデータの管理
- **主要メソッド**:
  - `loadApps()`: アプリデータの読み込み
  - `saveApps()`: アプリデータの保存
  - `addApp(AppInfo)`: アプリの追加
  - `removeApp(id)`: アプリの削除
  - `updateApp(id, AppInfo)`: アプリ情報の更新
  - `getApps()`: アプリ一覧の取得

### 4.3 AppLauncher クラス（新規作成）
- **役割**: アプリケーション起動の管理
- **主要メソッド**:
  - `launch(AppInfo)`: アプリケーションの起動
  - `updateLaunchInfo(id)`: 起動履歴の更新
  - `validateApp(AppInfo)`: アプリの有効性確認

### 4.4 IconExtractor クラス（新規作成）
- **役割**: アプリアイコンの抽出
- **主要メソッド**:
  - `extractIcon(QString path)`: アイコンの抽出
  - `saveIcon(QIcon, QString)`: アイコンの保存

## 5. UI実装詳細

### 5.1 グリッド表示
- **レイアウト**: QGridLayout
- **アイテム**: カスタムWidget（アイコン + 名前）
- **サイズ**: 120x120 ピクセル

### 5.2 リスト表示
- **コンポーネント**: QTreeWidget（既存）
- **カラム**: アプリ名、パス、最終起動、起動回数

### 5.3 アプリ追加ダイアログ
- **コンポーネント**: QDialog
- **要素**: 
  - ファイル選択ボタン
  - 名前入力フィールド
  - アイコンプレビュー
  - 説明入力フィールド

## 6. ファイル構成

```
GameLancher/
├── main.cpp
├── mainwindow.h
├── mainwindow.cpp
├── mainwindow.ui
├── appmanager.h          (新規)
├── appmanager.cpp        (新規)
├── applauncher.h         (新規)
├── applauncher.cpp       (新規)
├── iconextractor.h       (新規)
├── iconextractor.cpp     (新規)
├── addappdialog.h        (新規)
├── addappdialog.cpp      (新規)
├── addappdialog.ui       (新規)
├── appinfo.h             (新規)
├── GameLancher.pro
└── icons/                (アイコンリソース)
    └── extracted/        (抽出したアイコン保存先)
```

## 7. 実装手順

### フェーズ1: データ層の実装
1. AppInfo構造体の定義
2. AppManager クラスの実装
3. JSON読み書き機能の実装

### フェーズ2: UI機能の実装
1. アプリ追加ダイアログの作成
2. グリッド表示用カスタムWidgetの作成
3. MainWindow機能の拡張

### フェーズ3: 起動機能の実装
1. AppLauncher クラスの実装
2. アイコン抽出機能の実装
3. 起動履歴・統計機能の実装

### フェーズ4: 検索・フィルタ機能
1. 検索機能の実装
2. ソート機能の実装
3. 表示切替機能の完成

## 8. 技術仕様

### 8.1 開発環境
- **Qt Version**: 6.x
- **C++ Standard**: C++17
- **Platform**: Windows 10/11
- **Build System**: qmake

### 8.2 依存ライブラリ
- Qt Core
- Qt Widgets  
- Qt GUI
- (追加予定) Qt Network（更新機能用）

### 8.3 パフォーマンス要件
- アプリ一覧表示: 100個のアプリで1秒以内
- 検索機能: リアルタイム検索対応
- 起動時間: 3秒以内

## 9. セキュリティ考慮事項

1. **ファイルパス検証**: 存在しないパスや危険なパスのチェック
2. **権限管理**: 管理者権限が必要なアプリの判定
3. **データ検証**: JSON読み込み時の不正データ対策

## 10. 今後の拡張予定

- カテゴリ分類機能
- ショートカットキー設定
- 自動更新機能
- クラウド同期機能
- テーマ・スキン変更機能